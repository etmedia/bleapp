import{d as b,r as u,e as k,w as T,h as w,c as C,a as t,t as g,j as m,v as h,n as D,i as M,k as S,l as j,m as d,o as q,g as P,p as R,_ as B}from"./index-T2D_d14T.js";const H={class:"query-detail"},$={class:"page-title"},E={class:"content-box"},L={class:"result-area"},V={class:"button-area"},F={class:"log-section"},G={class:"log-content"},I=b({__name:"query-detail",setup(O){const i=M("globalObject",P),v=S(),o=u(i.returnData),s=u(""),c=u(null),r=u(""),n=u(!1),_=k(()=>{switch(v.params.type){case"address":return"查询终端地址";case"ip":return"查询终端IP";case"ethernetMaster":return"查询以太网主站参数";case"ethernetComm":return"查询以太网通信设置";case"gprsMaster":return"查询GPRS主站参数";case"gprsComm":return"查询GPRS通信参数";case"time":return"查询终端时间";case"version":return"查询终端版本信息";case"mac":return"查询终端MAC地址";default:return"查询"}}),y=a=>a[0]!=104||a[a.length-1]!=22||a.length!=35?(n.value=!0,r.value="返回帧错误",!1):!0,f=(a,e)=>{if(a)console.error(d(a)),r.value="查询失败："+d(a),n.value=!0;else{console.log("结果:",e);const l=new Date().toLocaleTimeString();s.value=`[${l}] RX:`+e+`
`+s.value,v.params.type=="address"&&y(i.makePayload(e))&&(o.value=e.slice(48,60))}},x=()=>{const a=new Date().toLocaleTimeString();try{o.value="";const l=i.makePayload("68 17 00 43 45 AA AA AA AA AA AA 00 5B 4F 05 01 05 40 01 02 00 00 6A 17 16");i.send(l,f),s.value=`[${a}] TX:`+j(l)+`
`+s.value,r.value="",n.value=!1}catch(e){r.value="查询失败："+d(e),n.value=!0,s.value=`[${a}] 查询失败: ${d(e)}
`+s.value}},A=()=>{s.value="",o.value="",r.value="",n.value=!1},p=()=>{if(c.value){c.value.style.height="0px";const a=c.value.scrollHeight;c.value.style.height=a+2+"px"}};return T(o,()=>{R(p)}),w(()=>{console.log("查询类型:",v.params.type),p()}),(a,e)=>(q(),C("div",H,[t("div",$,g(_.value),1),t("div",E,[t("div",L,[m(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l),class:"result-textarea",readonly:"",placeholder:"查询结果将显示在这里",rows:"1",ref_key:"resultTextarea",ref:c},null,512),[[h,o.value]])]),t("div",V,[t("div",{class:D(["message-area",{error:n.value}])},g(r.value),3),t("button",{class:"query-btn",onClick:x},"查询")]),t("div",F,[t("div",{class:"log-header"},[e[2]||(e[2]=t("span",null,"日志信息",-1)),t("button",{class:"clear-btn",onClick:A},"清除日志")]),t("div",G,[m(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value=l),readonly:"",class:"log-textarea",placeholder:"这里将显示查询日志..."},null,512),[[h,s.value]])])])])]))}}),X=B(I,[["__scopeId","data-v-5d9e5875"]]);export{X as default};
